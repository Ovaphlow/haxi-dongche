<!doctype html>
<html lang="zh">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>哈尔滨动车段 - 账项管理系统</title>

  <link rel="stylesheet" href="./lib/bootstrap/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="./lib/font-awesome/css/font-awesome.min.css">

  <link rel="stylesheet" href="./assets/css/dashboard.css">
</head>

<body>
  <div id="navbar"></div>

  <div class="container-fluid" id="app">
    <div class="row">
      <div id="sidebar"></div>

      <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4">
        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
          <h3>
            02.一体化作业申请单
          </h3>
        </div>

        <div class="lead">
          <div id="toolbar" class="pull-right"></div>
          <i class="fa fa-plus fa-fw"></i> 新增申请
          <br>
          <br>
        </div>

        <div class="card">
          <div class="card-body row">
            <div class="col-12">
              <p class="lead">动车组加装改造（软件升级）记录单</p>
            </div>

            <div class="col-12 form-group">
              <label>实施改造项目（升级系统）</label>
              <input type="text" class="form-control" v-model="journal0.subject">
            </div>

            <div class="col-4 form-group">
              <label>软件版本号（新）</label>
              <input type="text" class="form-control" v-model="journal0.software_version_new">
            </div>

            <div class="col-4 form-group">
              <label>软件版本号（旧）</label>
              <input type="text" class="form-control" v-model="journal0.software_version_old">
            </div>

            <div class="col-4 form-group">
              <label>批准文件号</label>
              <input type="text" class="form-control" v-model="journal0.approval_sn">
            </div>

            <div class="clearfix"></div>

            <div class="col-6 form-group">
              <label>实施改造车组</label>
              <input type="text" class="form-control" v-model="journal0.train">
            </div>

            <div class="col-6 form-group">
              <label>实施改造日期</label>
              <input type="date" class="form-control" v-model="journal0.date">
            </div>

            <div class="clearfix"></div>

            <div class="col-12">
              <button type="button" class="btn btn-secondary" v-on:click="plus">
                <i class="fa fa-plus"></i>
                新增记录
              </button>
              <div class="btn-group pull-right">
                <button type="button" class="btn btn-primary" v-on:click="update">
                  <i class="fa fa-save"></i>
                  保存记录单
                </button>
              </div>
            </div>

            <div class="col-12">
              <ul id="list" class="list-group">
                <li class="list-group-item" v-for="item in list">
                  <h5>
                    <span class="text-secondary">车厢号：</span>
                    <span class="text-info">{{ item.carriage }}</span>
                    <span class="pull-right">{{ item.carriage_subject }}</span>
                  </h5>

                  <ul class="list-inline">
                    <li class="list-inline-item">
                      <span class="text-secondary">开工时间：</span>
                      <span class="text-secondary">{{ item.time_begin }}</span>
                    </li>
                    <li class="list-inline-item">
                      <span class="text-secondary">完工时间：</span>
                      <span class="text-secondary">{{ item.time_end }}</span>
                    </li>
                    <li class="list-inline-item">
                      <span class="text-secondary">实施单位：</span>
                      {{ item.dept }}
                    </li>
                    <li class="list-inline-item">
                      <span class="text-secondary">实施者：</span>
                      <u>{{ item.operator }}</u>
                    </li>
                  </ul>

                  <ul class="list-inline">
                    <li class="list-inline-item">
                      <span class="text-secondary">动车所现场监控人：</span>
                      <u>{{ item.watcher }}</u>
                    </li>
                    <li class="list-inline-item">
                      <span class="text-secondary">监控班组：</span>
                      {{ item.watcher_group }}
                    </li>
                    <li class="list-inline-item">
                      <span class="text-secondary">质检员：</span>
                      <u>{{ item.qc }}</u>
                    </li>
                  </ul>

                  <ul class="list-inline">
                    <li class="list-inline-item">
                      <span class="text-secondary">备注：</span>
                      {{ item.remark }}
                    </li>
                  </ul>

                  <div class="clearfix"></div>

                  <div class="btn-group pull-right mt-3">
                    <button type="button" class="btn btn-light" v-bind:data-id="item.id" v-on:click="remove">
                      <i class="fa fa-trash"></i>
                      删除
                    </button>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="save" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="title" aria-hidden="true" style="font-size:0.875em">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 id="title" class="modal-title">新增记录</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body row">
            <div class="col-4 form-group">
              <label>实施改造的车厢号</label>
              <select class="form-control form-control-sm" v-model="journal.carriage">
                <option value="01">01</option>
                <option value="02">02</option>
                <option value="03">03</option>
                <option value="04">04</option>
                <option value="05">05</option>
                <option value="06">06</option>
                <option value="07">07</option>
                <option value="08">08</option>
              </select>
            </div>

            <div class="clearfix"></div>

            <div class="col-4 form-group">
              <label>开工时间</label>
              <input type="text" class="form-control form-control-sm" v-model="journal.time_begin">
            </div>
            <div class="col-4 form-group">
              <label>完工时间</label>
              <input type="text" class="form-control form-control-sm" v-model="journal.time_end">
            </div>

            <div class="clearfix"></div>

            <div class="col-6 form-group">
              <label>实施单位</label>
              <input type="text" class="form-control form-control-sm" v-model="journal.dept">
            </div>
            <div class="col-6 form-group">
              <label>实施者</label>
              <input type="text" class="form-control form-control-sm" v-model="journal.operator">
            </div>

            <div class="clearfix"></div>

            <div class="col-4 form-group">
              <label>动车所现场监控人</label>
              <input type="text" class="form-control form-control-sm" v-model="journal.watcher">
            </div>
            <div class="col-4 form-group">
              <label>监控班组</label>
              <input type="text" class="form-control form-control-sm" v-model="journal.watcher_group">
            </div>
            <div class="col-4 form-group">
              <label>质检员</label>
              <input type="text" class="form-control form-control-sm" v-model="journal.qc">
            </div>

            <div class="clearfix"></div>

            <div class="col-12 form-group">
              <label>备注</label>
              <textarea rows="2" class="form-control form-control-sm" v-model="journal.remark"></textarea>
            </div>
          </div>

          <div class="modal-footer">
            <button type="button" class="btn btn-primary" v-on:click="submit">
              <i class="fa fa-check-square-o"></i>
              确认
            </button>
            <button type="button" class="btn btn-secondary" data-dismiss="modal">取消</button>
          </div>
        </div>
      </main>
    </div>
  </div>

  <script src="./lib/babel-polyfill/dist/polyfill.min.js"></script>
  <script src="./lib/axios/dist/axios.min.js"></script>
  <script src="./lib/vue/dist/vue.min.js"></script>
  <script src="./lib/moment/min/moment.min.js"></script>
  <script src="./lib/jquery/dist/jquery.slim.min.js"></script>
  <script src="./lib/popper.js/dist/umd/popper.min.js"></script>
  <script src="./lib/bootstrap/dist/js/bootstrap.min.js"></script>

  <script src="./assets/js/journal.02-save.04.js"></script>
</body>

</html>